/*============================================================================*/
/*  版权声明 : Copyright (c) 1998-2008 中兴通讯股份有限公司波分软件开发部     */
/*  系统名称 : 8000平台                                                       */
/*  文 件 名 : LibInit.c                                                      */
/*  功能描述 :                                                                */
/*  作    者 : 胡永福                                                         */
/*  文件版本 : V1.00                                                          */
/*  创建日期 : 2014.6.19                                                      */
/*============================================================================*/
/*  修改记录                                                                  */
/*  日期         版本            修改人          修改摘要                     */
/*============================================================================*/

/*============================================================================*/
/* 包含的头文件，依次为标准库头文件、非标准库头文件                           */
/*============================================================================*/
#include "Arch.h"

#include "VarType.h"
#include "LibInit.h"
#include "MemoryPool.h"
#include "Shell.h"
/*============================================================================*/
/* 本文件使用的常量定义                                                       */
/*============================================================================*/

/*============================================================================*/
/* 本文件使用的宏定义                                                         */
/*============================================================================*/

/*============================================================================*/
/* 本文件使用的数据类型                                                       */
/*============================================================================*/

/*============================================================================*/
/* 全局变量                                                                   */
/*============================================================================*/

/*============================================================================*/
/* 本文件使用的变量                                                           */
/*============================================================================*/

/*============================================================================*/
/* 类的实现(C++),函数的实现(C)                                                */
/*============================================================================*/
static void DMMInit(void);

/*============================================================================*/
/*  函数名 : LibInit                                                          */
/*  输  入 : 输入参数或结构的说明                                             */
/*  输  出 : 无                                                               */
/*  返回值 : 执行结果                                                         */
/*  描  述 : 库初始化                                                         */
/*  作  者 : 胡永福                                                           */
/*  版  本 : V1.00                                                            */
/*  日  期 : 2014.6.19                                                        */
/*============================================================================*/
/*  修改记录                                                                  */
/*  日期            版本            修改人          修改摘要                  */
/*============================================================================*/
void LibInit(void)
{
    DMMInit();

    return;
}

/*============================================================================*/
/*  函数名 : DMMInit                                                          */
/*  输  入 : 输入参数或结构的说明                                             */
/*  输  出 : 无                                                               */
/*  返回值 : 执行结果                                                         */
/*  描  述 : 初始化内存管理模块                                               */
/*  作  者 : 胡永福                                                           */
/*  版  本 : V1.00                                                            */
/*  日  期 : 2014.6.19                                                        */
/*============================================================================*/
/*  修改记录                                                                  */
/*  日期            版本            修改人          修改摘要                  */
/*============================================================================*/
static void DMMInit(void)
{
    TMemListInfo listinfo[] =   
                        {         /* size                 num        usedno threshold */
                            { DMM_BLOCK_SIZE_2BYTE    ,    30000,      0,       80  },
                            { DMM_BLOCK_SIZE_4BYTE    ,    20000,      0,       80  },
                            { DMM_BLOCK_SIZE_8BYTE    ,    10000,      0,       80  },
                            { DMM_BLOCK_SIZE_16BYTE   ,    9000,       0,       80  },
                            { DMM_BLOCK_SIZE_32BYTE   ,    8000,       0,       80  },
                            { DMM_BLOCK_SIZE_48YTE    ,    7000,       0,       80  },
                            { DMM_BLOCK_SIZE_64YTE    ,    6000,       0,       80  },
                            { DMM_BLOCK_SIZE_96YTE    ,    5000,       0,       80  },
                            { DMM_BLOCK_SIZE_128YTE   ,    4000,       0,       80  },
                            { DMM_BLOCK_SIZE_192YTE   ,    3000,       0,       80  },
                            { DMM_BLOCK_SIZE_256BYTE  ,    2000,       0,       80  },
                            { DMM_BLOCK_SIZE_384YTE   ,    1000,       0,       80  },
                            { DMM_BLOCK_SIZE_512BYTE  ,    900,        0,       80  },
                            { DMM_BLOCK_SIZE_768YTE   ,    800,        0,       80  },
                            { DMM_BLOCK_SIZE_1KBYTE   ,    700,        0,       80  },
                            { DMM_BLOCK_SIZE_2KBYTE   ,    600,        0,       80  },
                            { DMM_BLOCK_SIZE_4KBYTE   ,    500,        0,       80  },
                            { DMM_BLOCK_SIZE_8KBYTE   ,    400,        0,       80  },
                            { DMM_BLOCK_SIZE_16KBYTE  ,    300,        0,       80  },
                            { DMM_BLOCK_SIZE_32KBYTE  ,    200,        0,       80  },
                            { DMM_BLOCK_SIZE_48KBYTE  ,    100,        0,       80  },
                            { DMM_BLOCK_SIZE_64KBYTE  ,    90,         0,       80  },
                            { DMM_BLOCK_SIZE_96KBYTE  ,    80,         0,       80  },
                            { DMM_BLOCK_SIZE_128KBYTE ,    70,         0,       80  },
                            { DMM_BLOCK_SIZE_192KBYTE ,    60,         0,       80  },
                            { DMM_BLOCK_SIZE_256KBYTE ,    50,         0,       80  },
                            { DMM_BLOCK_SIZE_384KBYTE ,    40,         0,       80  },
                            { DMM_BLOCK_SIZE_512KBYTE ,    30,         0,       80  },
                            { DMM_BLOCK_SIZE_768KBYTE ,    20,         0,       80  },
                            { DMM_BLOCK_SIZE_1MKBYTE  ,    10,         0,       80  }
                        };
                            
    MemPool_Init(listinfo, sizeof(listinfo) / sizeof(listinfo[0]));
}

