/*============================================================================*/
/*  版权声明 : Copyright (c) 1998-2008 中兴通讯股份有限公司传输北京软件开发部 */
/*  系统名称 : ZXONE 8600光传输系统                                           */
/*  文 件 名 : ThreadPool.h                                                   */
/*  功能描述 :                                                                */
/*  创 建 人 : 胡永福                                                         */
/*  文件版本 : V1.00.001                                                      */
/*  创建日期 : 2014.10.21                                                     */
/*============================================================================*/
/*  修改记录                                                                  */
/*  日期         版本            修改人          修改摘要                     */
/*============================================================================*/
#ifndef _THREADPOOL_H
#define _THREADPOOL_H

/*============================================================================*/
/* 包含的标准库或者其他非标准库头文件                                         */
/*============================================================================*/

/*============================================================================*/
/* 常量定义                                                                   */
/*============================================================================*/

/*============================================================================*/
/* 全局宏                                                                     */
/*============================================================================*/
#define THREAD_MAX_POOLS_NUM        32
/*============================================================================*/
/* 全局数据类型                                                               */
/*============================================================================*/
typedef struct worker 
{ 
	void *(*process) (void *arg); 
	void *arg; 
	struct worker *next; 
} CThread_worker; 

typedef struct 
{ 
	pthread_mutex_t queue_lock; 
	pthread_cond_t queue_ready; 
	CThread_worker *queue_head; 
	INT32 shutdown; 
	pthread_t *threadid; 
	INT32 max_thread_num; 
	INT32 cur_queue_size; 
	INT32 max_queue_size;
}CThread_pool; 

/*============================================================================*/
/* 类定义                                                                     */
/*============================================================================*/

/*============================================================================*/
/* 模板(template)(包括C++中的类模板和函数模板)                                */
/*============================================================================*/

/*============================================================================*/
/* 全局函数原型                                                               */
/*============================================================================*/
INT32 ThreadPool_AddWorker(void *(*process)(void *arg), void *arg, INT32 PoolId); 

INT32 ThreadPool_Init(INT32 max_thread_num, INT32 max_queue_size);

INT32 ThreadPool_Destroy(INT32 PoolId);

#endif
